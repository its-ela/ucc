El algoritmo se divide en **Entrada**, **Proceso** y **Salida**, con subfases extendidas para manejo de redes y balanceo.

- **Entrada:**
    - Número de pedidos (M ≥ 1) y repartidores (R ≥ 1).
    - Para cada pedido: 
	    - ID, 
	    - Lista de productos (código, categoría, precio, cantidad), 
	    - Stock disponible, 
	    - Zona geográfica (ID de zona: ej. 0=Bodega, 1-10=zonas cliente), 
	    - Prioridad (1=Alta, 2=Media, 3=Baja), 
	    - Valor aproximado del pedido.
    - Grafo de distancias: matriz o lista de adyacencias con distancias entre zonas (ej. zona1 a zona2: 5km directo, pero zona1 a zona3: vía zona2 si no directo).
    - Restricciones: capacidad máxima por repartidor (K entregas), velocidad promedio, costo por km, tiempo máximo por ruta.
- **Proceso:**
    - **Fase 1: Procesamiento individual de pedidos** (base anterior): Validar stock, calcular subtotales, descuentos (volumen, global, promociones), IVA, total por pedido. Marcar viables.
    - **Fase 2: Preparación logística**:
        - Construir grafo de zonas (nodos=zonas, aristas=distancias).
        - Ordenar pedidos viables por prioridad y valor (para priorizar asignaciones).
    - **Fase 3: Optimización**:
        - Para cada repartidor: Asignar un subconjunto de pedidos (balanceando por número y valor total).
        - Para cada asignación: Calcular caminos eficientes desde bodega a través de las zonas de los pedidos (encontrando secuencias que minimicen distancias acumuladas, considerando conexiones intermedias si necesario).
        - Ajustar orden de visitas en la ruta para reducir el recorrido total.
        - Estimar tiempos: suma de distancias por caminos / velocidad + penalizaciones.
        - Si una ruta excede tiempo/capacidad: Reasignar pedidos a otros repartidores o rechazar.
    - **Fase 4: Ajustes finales**: Prorratear costos logísticos por pedido, recalcular totals individuales.
- **Salida:**
    - Detalle por pedido: productos, descuentos, total ajustado con logística.
    - Por repartidor: Ruta secuencial (zonas visitadas), distancia total, tiempo estimado, costo.
    - Resumen global: Ingresos totales, costos logísticos agregados, pedidos procesados/rechazados, métricas de eficiencia (ej. carga balanceada).
    - Alertas: Sugerencias para mejorar (ej. "Agregar repartidor si >X% sobrecarga").